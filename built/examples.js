var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();define("ol3-popup/paging/paging",["require","exports","openlayers","jquery"],function(e,t,i,a){"use strict";function s(e){return e.getInteriorPoint?e.getInteriorPoint().getCoordinates():i.extent.getCenter(e.getExtent())}Object.defineProperty(t,"__esModule",{value:!0});var o="pages",r="page",p="add",l="clear",c="goto";function u(){return"_"+1e6*Math.random()}var n=function(n){function e(e){var t=n.call(this)||this;return t.options=e,t._pages=[],t.domNode=document.createElement("div"),t.domNode.classList.add(o),e.popup.domNode.appendChild(t.domNode),t}return __extends(e,n),Object.defineProperty(e.prototype,"activePage",{get:function(){return this._activePage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._pages.indexOf(this._activePage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._pages.length},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t){n.prototype.on.call(this,e,t)},e.prototype.findPage=function(t){return this._pages.filter(function(e){return e.feature===t})[0]},e.prototype.removePage=function(e){var t=this._pages.indexOf(e);if(0<=t){this._pages.splice(t,1);this._pages.length;this.goto(t)}},e.prototype.addFeature=function(e,t){var n=this.findPage(e);if(n)return this.goto(this._pages.indexOf(n)),n;var o=e.getGeometry();return o=o.intersectsCoordinate(t.searchCoordinate)?new i.geom.Point(t.searchCoordinate):new i.geom.Point(o.getClosestPoint(t.searchCoordinate)),n={element:document.createElement("div"),feature:e,location:o,uid:u()},this._pages.push(n),this.dispatchEvent({type:p,element:n.element,feature:n.feature,geom:n.location,pageIndex:n.uid}),n},e.prototype.add=function(e,t){var n,o=document.createElement("div");if("string"==typeof e)o.innerHTML=e,this._pages.push(n={element:o,location:t,uid:u()});else if(e.appendChild)o.classList.add(r),this._pages.push(n={element:o,location:t,uid:u()});else if(e.then){var i=e;o.classList.add(r),this._pages.push(n={element:o,location:t,uid:u()}),a.when(i).then(function(e){"string"==typeof e?o.innerHTML=e:o.appendChild(e)})}else{if("function"!=typeof e)throw"invalid source value: "+e;o.classList.add("page"),this._pages.push(n={callback:e,element:o,location:t,uid:u()})}return this.dispatchEvent({type:p,element:o,feature:null,geom:t,pageIndex:this._pages.length-1}),n},e.prototype.clear=function(){this._activePage=null,this._pages=[],this.dispatchEvent(l)},e.prototype.goto=function(t){var n,e=this;if(n="number"==typeof t?this._pages[t]:this._pages.filter(function(e){return e.uid===t})[0]){var o=this.options.popup;if(n.feature)return this.options.popup.show(s(n.location||n.feature.getGeometry()),o.options.asContent(n.feature)),this._activePage=n,void this.dispatchEvent(c);var i=a.Deferred();if(n.callback){var r=n.callback();a.when(r).then(function(e){if("string"==typeof e)n.element.innerHTML=e;else{if(void 0===e.innerHTML)throw"invalid callback result: "+e;n.element.innerHTML="",n.element.appendChild(e)}i.resolve()})}else i.resolve();i.then(function(){e._activePage=n,e.options.popup.show(s(n.location),n.element),e.dispatchEvent(c)})}},e.prototype.next=function(){0<=this.activeIndex&&this.activeIndex<this.count&&this.goto(this.activeIndex+1)},e.prototype.prev=function(){0<this.activeIndex&&this.goto(this.activeIndex-1)},e.prototype.indexOf=function(n){var o=-1;return this._pages.some(function(e,t){if(e.feature===n)return o=t,!0}),o},e}(i.Observable);t.Paging=n}),define("ol3-popup/paging/page-navigator",["require","exports","openlayers"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="btn-prev",a="btn-next",i="hidden",s="active",p="inactive",l="page-num",r="show",c="hide",u="prev",d="next";function f(e,t,n){void 0===n&&(n=!1),n?e.classList.add(t):e.classList.remove(t)}var g=function(t){function e(e){var i=t.call(this)||this,r=(i.options=e).pages;return i.domNode=document.createElement("div"),i.domNode.classList.add("pagination"),i.domNode.innerHTML=i.template(),i.prevButton=i.domNode.getElementsByClassName(o)[0],i.nextButton=i.domNode.getElementsByClassName(a)[0],i.pageInfo=i.domNode.getElementsByClassName(l)[0],r.options.popup.domNode.appendChild(i.domNode),i.prevButton.addEventListener("click",function(){return i.dispatchEvent(u)}),i.nextButton.addEventListener("click",function(){return i.dispatchEvent(d)}),r.on("goto",function(){return 1<r.count?i.show():i.hide()}),r.on("clear",function(){return i.hide()}),r.on("goto",function(){var e=r.activeIndex,t=r.count,n=0<e,o=e<t-1;f(i.prevButton,p,!n),f(i.prevButton,s,n),f(i.nextButton,p,!o),f(i.nextButton,s,o),i.prevButton.disabled=!n,i.nextButton.disabled=!o,i.pageInfo.innerHTML=1+e+" of "+t}),i}return __extends(e,t),e.prototype.template=function(){return'<button class="arrow btn-prev"></button><span class="page-num">m of n</span><button class="arrow btn-next"></button>'},e.prototype.hide=function(){this.domNode.classList.add(i),this.dispatchEvent(c)},e.prototype.show=function(){this.domNode.classList.remove(i),this.dispatchEvent(r)},e}(n.Observable);t.default=g}),define("node_modules/ol3-fun/ol3-fun/common",["require","exports"],function(e,t){"use strict";function i(e,t){if("string"==typeof t)return e;if("number"==typeof t)return parseFloat(e);if("boolean"==typeof t)return"1"===e||"true"===e;if(Array.isArray(t))return e.split(",").map(function(e){return i(e,t[0])});throw"unknown type: "+t}function r(e,t){void 0===t&&(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function a(e,t){null!=e&&t(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.asArray=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t},t.toggle=function(e,t,n){void 0===n&&(n=!1),n?e.classList.add(t):e.classList.remove(t)},t.parse=i,t.getQueryParameters=function(e,t){void 0===t&&(t=window.location.href);var o=e;Object.keys(o).forEach(function(n){a(r(n,t),function(e){var t=i(e,o[n]);void 0!==t&&(o[n]=t)})})},t.getParameterByName=r,t.doif=a,t.mixin=function(t,n){return Object.keys(n).forEach(function(e){return t[e]=n[e]}),t},t.defaults=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(t){Object.keys(t).filter(function(e){return void 0===n[e]}).forEach(function(e){return n[e]=t[e]})}),n},t.cssin=function(e,t){var n="style-"+e,o=document.getElementById(n);o||((o=document.createElement("style")).id=n,o.type="text/css",document.head.appendChild(o),o.appendChild(document.createTextNode(t)));var i=o.dataset;return i.count=parseInt(i.count||"0")+1+"",function(){i.count=parseInt(i.count||"0")-1+"","0"===i.count&&o.remove()}},t.debounce=function(o,i,r){var a,s=this;return void 0===i&&(i=50),void 0===r&&(r=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r&&!a;clearTimeout(a),a=setTimeout(function(){a=null,r||o.apply(s,e)},i),n&&o.call(s,e)}},t.html=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild||t.firstChild},t.pair=function(e,n){var o=new Array(e.length*n.length),i=0;return e.forEach(function(t){return n.forEach(function(e){return o[i++]=[t,e]})}),o},t.range=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=n;return t},t.shuffle=function(e){for(var t,n,o=e.length;0!==o;)n=Math.floor(Math.random()*o),t=e[o-=1],e[o]=e[n],e[n]=t;return e}}),define("ol3-popup/interaction",["require","exports","openlayers","node_modules/ol3-fun/ol3-fun/common"],function(e,t,g,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(l){var c,u=e.call(this,l)||this,d=(u.options=l).popup,f=l.map;return u.handlers=[],u.handlers.push(f.on("click",function(n){var e,t,o;if(u.get("active")){var i=d.isDocked();d.options.multi&&l.addCondition(n)||d.pages.clear();var r=!1,a=g.extent.createEmpty();a[0]=a[2]=n.pixel[0],a[1]=a[3]=n.pixel[1],a=g.extent.buffer(a,4),t=(e=[f.getCoordinateFromPixel([a[0],a[1]]),f.getCoordinateFromPixel([a[2],a[3]])])[0],a[0]=t[0],a[3]=t[1],o=e[1],a[2]=o[0],a[1]=o[1];var s,p=d.options.layers;p||(p=f.getLayers().getArray().filter(function(e){return e instanceof g.layer.Vector})),p.forEach(function(e){e!==c&&e.getSource().forEachFeatureIntersectingExtent(a,function(e){return s=d.pages.addFeature(e,{searchCoordinate:n.coordinate}),r=!0,!d.options.multi})}),r||f.forEachFeatureAtPixel(n.pixel,function(e,t){if(t&&t!==c&&-1!==p.indexOf(t))return s=d.pages.addFeature(e,{searchCoordinate:n.coordinate}),r=!0,!d.options.multi}),!r&&d.options.showCoordinates&&(s=d.pages.add(("\n<table>\n<tr><td>lon</td><td>"+n.coordinate[0].toPrecision(6)+"</td></tr>\n<tr><td>lat</td><td>"+n.coordinate[1].toPrecision(6)+"</td></tr>\n</table>").trim(),new g.geom.Point(n.coordinate)),r=!0),r?(d.pages.goto(s.uid),i&&!d.isDocked()&&d.dock()):d.options.multi&&l.addCondition(n)||d.hide()}})),d.options.pagingStyle&&(c=u.setupOverlay()),d.on("dispose",function(){return u.destroy()}),u}return __extends(t,e),t.create=function(e){if(!e.popup)throw"popup is a required option";return e.map||(e.map=e.popup.options.map,e.map),(e=n.defaults(e,t.DEFAULT_OPTIONS)).addCondition=e.addCondition||g.events.condition.shiftKeyOnly,e.removeCondition=e.removeCondition||g.events.condition.never,e.toggleCondition=e.addCondition||g.events.condition.shiftKeyOnly,new t(e)},t.prototype.setupOverlay=function(){var e=this,o=this.options.popup,i=new g.source.Vector({useSpatialIndex:!1,wrapX:this.options.wrapX}),t=new g.layer.Vector({map:this.options.map,source:i,updateWhileAnimating:!0,updateWhileInteracting:!0});return t.setStyle(function(e,t){var n=i.getFeatures().indexOf(e);return o.options.pagingStyle(e,t,n)}),t.setMap(this.options.map),this.handlers.push(function(){return e.options.map.removeLayer(t)}),o.pages.on("clear",function(){i.clear()}),this.handlers.push(o.pages.on("goto",function(){return t.getSource().refresh()})),o.pages.on("remove",function(t){i.forEachFeature(function(e){if(e.get("page-index")===t.pageIndex)return i.removeFeature(e),!0})}),o.pages.on("add",function(e){var t=e.feature;t?((t=t.clone()).setStyle(null),e.geom&&t.setGeometry(e.geom)):e.geom&&(t=new g.Feature).setGeometry(e.geom),t&&(t.set("page-index",e.pageIndex),i.addFeature(t))}),t},t.prototype.destroy=function(){this.handlers.forEach(function(e){return e instanceof Function?e():g.Observable.unByKey(e)})},t.DEFAULT_OPTIONS={multi:!0},t}(g.interaction.Select);t.SelectInteraction=o}),define("node_modules/ol3-symbolizer/ol3-symbolizer/common/assign",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e,t,n){null==n||"object"==typeof n&&0===Object.keys(n).length||("image"===t&&(n.hasOwnProperty("radius")&&(t="circle"),n.hasOwnProperty("points")&&n.points<1/0&&(t="star")),e[t]=n)}}),define("node_modules/ol3-symbolizer/ol3-symbolizer/common/mixin",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixin=function(t,n){return Object.keys(n).forEach(function(e){return t[e]=n[e]}),t}}),define("node_modules/ol3-symbolizer/ol3-symbolizer/common/doif",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doif=function(e,t){null!=e&&t(e)}}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-cross",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.is=function(e){return!!e&&(!!e.cross||!!e.star&&(!!e.star.radius&&(4===e.star.points&&(0==e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{cross:{size:2*t.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e.inverse=function(e){var t=e.cross;return t?{star:{radius:t.size/2,radius2:0,points:4,angle:0,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}:e},e}();t.Shapeshifter=n}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-square",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.is=function(e){return!!e&&(!!e.square||!!e.star&&(!!e.star.radius&&(4===e.star.points&&(void 0===e.star.radius2&&.7853981633974483==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{square:{size:2*t.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e.inverse=function(e){var t=e.square;return t?{star:{radius:t.size/2,radius2:void 0,points:4,angle:.7853981633974483,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}:e},e}();t.Shapeshifter=n}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-diamond",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.is=function(e){return!!e&&(!!e.diamond||!!e.star&&(!!e.star.radius&&(4===e.star.points&&(void 0===e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{diamond:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e.inverse=function(e){var t=e.diamond;return t?{star:{radius:t.size/2,radius2:void 0,points:4,angle:0,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}:e},e}();t.Shapeshifter=n}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-triangle",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.is=function(e){return!!e&&(!!e.triangle||!!e.star&&(!!e.star.radius&&(3===e.star.points&&(null==e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{triangle:{size:2*t.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e.inverse=function(e){var t=e.triangle;return t?{star:{radius:t.size/2,radius2:void 0,points:3,angle:0,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}:e},e}();t.Shapeshifter=n}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-x",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.is=function(e){return!!e&&(!!e.x||!!e.star&&(!!e.star.radius&&(4===e.star.points&&(0==e.star.radius2&&.7853981633974483==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{x:{size:2*t.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e.inverse=function(e){var t=e.x;return t?{star:{radius:t.size/2,radius2:0,points:4,angle:.7853981633974483,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}:e},e}();t.Shapeshifter=n}),define("node_modules/ol3-symbolizer/ol3-symbolizer/format/ol3-symbolizer",["require","exports","openlayers","node_modules/ol3-symbolizer/ol3-symbolizer/common/assign","node_modules/ol3-symbolizer/ol3-symbolizer/common/mixin","node_modules/ol3-symbolizer/ol3-symbolizer/common/doif","node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-cross","node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-square","node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-diamond","node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-triangle","node_modules/ol3-symbolizer/ol3-symbolizer/format/plugins/as-x"],function(e,t,l,o,m,n,i,r,a,s,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){this.converters=[],this.converters.push(i.Shapeshifter),this.converters.push(r.Shapeshifter),this.converters.push(a.Shapeshifter),this.converters.push(s.Shapeshifter),this.converters.push(p.Shapeshifter)}return e.prototype.fromJson=function(t){return this.converters.some(function(e){return e.is(t)&&e.inverse&&!!(t=e.inverse(t))}),this.deserializeStyle(t)},e.prototype.toJson=function(e){var t=this.serializeStyle(e);return this.converters.some(function(e){return e.is(t)&&e.as&&!!(t=e.as(t))}),t},e.prototype.getGeometry=function(e){var t=e.getGeometry();return t instanceof l.geom.Polygon&&(t=t.getInteriorPoint()),t},e.prototype.serializeStyle=function(t){var n={};if(!t)return null;if("string"==typeof t)throw t;if("number"==typeof t)throw t;return t.getColor&&m.mixin(n,this.serializeColor(t.getColor())),t.getImage&&o.assign(n,"image",this.serializeImage(t.getImage())),t.getFill&&o.assign(n,"fill",this.serializeFill(t.getFill())),t.getOpacity&&o.assign(n,"opacity",t.getOpacity()),t.getStroke&&o.assign(n,"stroke",this.serializeStroke(t.getStroke())),t.getText&&o.assign(n,"text",this.serializeText(t.getText())),t.getWidth&&o.assign(n,"width",t.getWidth()),t.getOffsetX&&o.assign(n,"offset-x",t.getOffsetX()),t.getOffsetY&&o.assign(n,"offset-y",t.getOffsetY()),t.getWidth&&o.assign(n,"width",t.getWidth()),t.getFont&&o.assign(n,"font",t.getFont()),t.getRadius&&o.assign(n,"radius",t.getRadius()),t.getRadius2&&o.assign(n,"radius2",t.getRadius2()),t.getPoints&&o.assign(n,"points",t.getPoints()),t.getAngle&&o.assign(n,"angle",t.getAngle()),t.getRotation&&o.assign(n,"rotation",t.getRotation()),t.getOrigin&&o.assign(n,"origin",t.getOrigin()),t.getScale&&o.assign(n,"scale",t.getScale()),t.getSize&&o.assign(n,"size",t.getSize()),t.getAnchor&&(o.assign(n,"anchor",t.getAnchor()),"anchorXUnits,anchorYUnits,anchorOrigin".split(",").forEach(function(e){o.assign(n,e,t[e+"_"])})),t.path&&(t.path&&o.assign(n,"path",t.path),t.getImageSize&&o.assign(n,"imgSize",t.getImageSize()),t.stroke&&o.assign(n,"stroke",t.stroke),t.fill&&o.assign(n,"fill",t.fill),t.scale&&o.assign(n,"scale",t.scale),t.imgSize&&o.assign(n,"imgSize",t.imgSize)),t.getSrc&&o.assign(n,"src",t.getSrc()),n},e.prototype.serializeImage=function(e){if("string"==typeof e)throw e;if("number"==typeof e)throw e;return this.serializeStyle(e)},e.prototype.serializeStroke=function(e){if("string"==typeof e)throw e;if("number"==typeof e)throw e;return this.serializeStyle(e)},e.prototype.serializeText=function(e){return e},e.prototype.serializeColor=function(e){if(e instanceof Array)return{color:l.color.asString(e)};if(e instanceof CanvasGradient)return{gradient:e};if(e instanceof CanvasPattern)return{pattern:e};if("string"==typeof e)return{color:e};throw"unknown color type"},e.prototype.serializeFill=function(e){return this.serializeStyle(e)},e.prototype.deserializeStyle=function(e){var t,n,o,i,r=this;if(e.circle)t=this.deserializeCircle(e.circle);else if(e.star)t=this.deserializeStar(e.star);else if(e.icon)t=this.deserializeIcon(e.icon);else if(e.svg)t=this.deserializeSvg(e.svg);else if(e.image&&(e.image.img||e.image.path))t=this.deserializeSvg(e.image);else if(e.image&&e.image.src)t=this.deserializeIcon(e.image);else if(e.image)throw"unknown image type";e.text&&(n=this.deserializeText(e.text)),e.fill&&(o=this.deserializeFill(e.fill)),e.stroke&&(i=this.deserializeStroke(e.stroke));var a=new l.style.Style({image:t,text:n,fill:o,stroke:i});return t&&a.setGeometry(function(e){return r.getGeometry(e)}),a},e.prototype.deserializeText=function(e){var t;e.rotation=e.rotation||0,e.scale=e.scale||1;var n=[e["offset-x"]||0,e["offset-y"]||0],o=n[0],i=n[1],r=new l.geom.Point([o,i]);return r.rotate(e.rotation,[0,0]),r.scale(e.scale,e.scale),o=(t=r.getCoordinates())[0],i=t[1],new l.style.Text({fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke),text:e.text,font:e.font,offsetX:o,offsetY:i,rotation:e.rotation,scale:e.scale})},e.prototype.deserializeCircle=function(e){var t=new l.style.Circle({radius:e.radius,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return t.setOpacity(e.opacity),t},e.prototype.deserializeStar=function(e){var t=new l.style.RegularShape({radius:e.radius,radius2:e.radius2,points:e.points,angle:e.angle,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return n.doif(e.rotation,function(e){return t.setRotation(e)}),n.doif(e.opacity,function(e){return t.setOpacity(e)}),t},e.prototype.deserializeIcon=function(e){e.anchor||(e.anchor=[e["anchor-x"]||.5,e["anchor-y"]||.5]);var t=new l.style.Icon({anchor:e.anchor||[.5,.5],anchorOrigin:e.anchorOrigin||"top-left",anchorXUnits:e.anchorXUnits||"fraction",anchorYUnits:e.anchorYUnits||"fraction",img:void 0,imgSize:void 0,offset:e.offset,offsetOrigin:e.offsetOrigin,opacity:e.opacity,scale:e.scale,snapToPixel:e.snapToPixel,rotateWithView:e.rotateWithView,rotation:e.rotation,size:e.size,src:e.src,color:e.color});return t.load(),t},e.prototype.deserializeSvg=function(t){var e;if(t.rotation=t.rotation||0,t.scale=t.scale||1,t.img){var n=document.getElementById(t.img);if(!n)throw"unable to find svg element: "+t.img;if(n){var o=n.getElementsByTagName("path")[0];o&&(n.viewBox&&(t.imgSize||(t.imgSize=[n.viewBox.baseVal.width,n.viewBox.baseVal.height])),t.path=(t.path||"")+o.getAttribute("d"))}}var i=document.createElement("canvas");if(t.path){if(e=t.imgSize.map(function(e){return e*t.scale}),i.width=e[0],i.height=e[1],t.stroke&&t.stroke.width){var r=2*t.stroke.width*t.scale;i.width+=r,i.height+=r}var a=i.getContext("2d"),s=new Path2D(t.path);a.translate(i.width/2,i.height/2),a.scale(t.scale,t.scale),a.translate(-t.imgSize[0]/2,-t.imgSize[1]/2),t.fill&&(a.fillStyle=t.fill.color,a.fill(s)),t.stroke&&(a.strokeStyle=t.stroke.color,a.lineWidth=t.stroke.width,a.stroke(s))}var p=new l.style.Icon({img:i,imgSize:[i.width,i.height],rotation:t.rotation,scale:1,anchor:t.anchor||[i.width/2,i.height],anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits||"pixels",anchorYUnits:t.anchorYUnits||"pixels",offset:t.offset,offsetOrigin:t.offsetOrigin,opacity:t.opacity,snapToPixel:t.snapToPixel,rotateWithView:t.rotateWithView,size:[i.width,i.height],src:void 0});return m.mixin(p,{path:t.path,stroke:t.stroke,fill:t.fill,scale:t.scale,imgSize:t.imgSize})},e.prototype.deserializeFill=function(e){return new l.style.Fill({color:e&&this.deserializeColor(e)})},e.prototype.deserializeStroke=function(e){var t=new l.style.Stroke;return n.doif(e.color,function(e){return t.setColor(e)}),n.doif(e.lineCap,function(e){return t.setLineCap(e)}),n.doif(e.lineDash,function(e){return t.setLineDash(e)}),n.doif(e.lineJoin,function(e){return t.setLineJoin(e)}),n.doif(e.miterLimit,function(e){return t.setMiterLimit(e)}),n.doif(e.width,function(e){return t.setWidth(e)}),t},e.prototype.deserializeColor=function(e){var t;if(e.color)return e.color;if(e.gradient){var o,n=e.gradient.type;if(0===n.indexOf("linear(")?o=this.deserializeLinearGradient(e.gradient):0===n.indexOf("radial(")&&(o=this.deserializeRadialGradient(e.gradient)),e.gradient.stops){m.mixin(o,{stops:e.gradient.stops});var i=e.gradient.stops.split(";");(i=i.map(function(e){return e.trim()})).forEach(function(e){var t=e.match(/ \d+%/m)[0],n=e.substr(0,e.length-t.length);o.addColorStop(parseInt(t)/100,n)})}return o}if(e.pattern){var r=e.pattern.repitition,a=(l=document.createElement("canvas")).width=l.height=6|e.pattern.spacing,s=l.getContext("2d");switch(s.fillStyle=e.pattern.color,e.pattern.orientation){case"horizontal":for(var p=0;p<a;p++)s.fillRect(p,0,1,1);break;case"vertical":for(p=0;p<a;p++)s.fillRect(0,p,1,1);break;case"cross":for(p=0;p<a;p++)s.fillRect(p,0,1,1),s.fillRect(0,p,1,1);break;case"forward":for(p=0;p<a;p++)s.fillRect(p,p,1,1);break;case"backward":for(p=0;p<a;p++)s.fillRect(a-1-p,p,1,1);break;case"diagonal":for(p=0;p<a;p++)s.fillRect(p,p,1,1),s.fillRect(a-1-p,p,1,1)}return m.mixin(s.createPattern(l,r),e.pattern)}if(e.image){var l=document.createElement("canvas"),c=(t=e.image.imgSize,l.width=t[0],l.height=t[1],t),u=c[0],d=c[1],f=l.getContext("2d"),g=document.createElement("img");return g.src=e.image.imageData,g.onload=function(){return f.drawImage(g,0,0,u,d)},"rgba(255,255,255,0.1)"}throw"invalid color configuration"},e.prototype.deserializeLinearGradient=function(e){var t=JSON.parse(e.type.replace(/\w+\((.*)\)/m,"[$1]")),n=t[0],o=t[1],i=t[2],r=t[3],a=document.createElement("canvas");a.width=Math.max(n,i),a.height=Math.max(o,r);var s=a.getContext("2d").createLinearGradient(n,o,i,r);return m.mixin(s,{type:"linear("+[n,o,i,r].join(",")+")"}),s},e.prototype.deserializeRadialGradient=function(e){var t=JSON.parse(e.type.replace(/radial\((.*)\)/m,"[$1]")),n=t[0],o=t[1],i=t[2],r=t[3],a=t[4],s=t[5],p=document.createElement("canvas");p.width=2*Math.max(n,r),p.height=2*Math.max(o,a);var l=p.getContext("2d").createRadialGradient(n,o,i,r,a,s);return m.mixin(l,{type:"radial("+[n,o,i,r,a,s].join(",")+")"}),l},e}();t.StyleConverter=c}),define("node_modules/ol3-symbolizer/index",["require","exports","node_modules/ol3-symbolizer/ol3-symbolizer/format/ol3-symbolizer"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Symbolizer=n}),define("ol3-popup/commands/smartpick",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smartpick=function(e,t,n){t||(t=e.getPosition());var o=[0,0];if("number"!=typeof n){n=(e.options.autoPanMargin||0)+(e.options.pointerPosition||0);var i=e.content,r=getComputedStyle(i),a=[r.width,r.height].map(function(e){return parseInt(e)});o=[n+a[0]/2,n+a[1]/2]}else o=[n,n];var s=e.getPositioning().split("-",2),p=s[0],l=s[1],c=e.options.map.getPixelFromCoordinate(t),u=c[0],d=c[1],f=e.options.map.getSize(),g=u,m=d,h=f[0]-u,v=f[1]-d;return p=m<o[1]?"top":v<o[1]?"bottom":null,l=g<o[0]?"left":h<o[0]?"right":"center",p||"center"===l||(p="center"),(p=p||(m<v?"top":"bottom"))+"-"+(l=l||"center")}}),define("ol3-popup/ol3-popup",["require","exports","jquery","openlayers","ol3-popup/paging/paging","ol3-popup/paging/page-navigator","node_modules/ol3-fun/ol3-fun/common","ol3-popup/interaction","node_modules/ol3-symbolizer/index","ol3-popup/commands/smartpick","node_modules/ol3-symbolizer/ol3-symbolizer/common/mixin"],function(e,t,o,a,i,s,p,l,n,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=new n.Symbolizer.StyleConverter,f=d.fromJson({circle:{fill:{color:"rgba(255,0,0,1)"},opacity:1,stroke:{color:"rgba(255,255,255,1)",width:1},radius:3}}),g="ol-popup-docker",m="ol-popup-closer",h="ol-popup-content",v="hidden",y="docked",b="dispose",x="dock",w="hide",k="show",P="undock";var z={map:null,asContent:function(n){var e=document.createElement("div"),t=Object.keys(n.getProperties()).filter(function(e){var t=n.get(e);return"string"==typeof t||"number"==typeof t});return e.title=n.getGeometryName(),e.innerHTML="<table>"+t.map(function(e){return"<tr><td>"+e+"</td><td>"+n.get(e)+"</td></tr>"}).join("")+"</table>",e},multi:!1,autoPan:!0,autoPopup:!0,autoPanMargin:20,autoPositioning:!0,className:"ol-popup",css:"\n.ol-popup {\n    background-color: white;\n    border: 1px solid black;\n    padding: 4px;\n    padding-top: 24px;\n}\n.ol-popup .ol-popup-content {\n    overflow: auto;\n    min-width: 120px;\n    max-width: 360px;\n    max-height: 240px;\n}\n.ol-popup .pages {\n    overflow: auto;\n    max-width: 360px;\n    max-height: 240px;\n}\n.ol-popup .ol-popup-closer {\n    right: 4px;\n}\n".trim(),insertFirst:!0,pointerPosition:50,offset:[0,-10],positioning:"bottom-center",stopEvent:!0,showCoordinates:!1},r=function(r){function n(e){var a,t=r.call(this,e)||this;return e.pagingStyle||(e.pagingStyle=(a=t,function(e,t,n){var o=[f];if(a.options.multi&&1<a.pages.count){var i=a.pages.activeIndex===n,r=d.fromJson({text:{text:""+(n+1),fill:{color:i?"white":"black"},stroke:{color:i?"black":"white",width:i?4:2},"offset-y":20}});o.push(r)}return o})),t.options=e,t.handlers=[],t.configureDom(e),t.configureDockContainer(t.domNode),t.createCloser(t.domNode),t.configureContentContainer(),t.configurePaging(),t.configureAutoPopup(),t}return __extends(n,r),n.create=function(e){var t=new n(e=p.defaults({},e,z));return e.map&&e.map.addOverlay(t),t},n.prototype.configureDom=function(e){p.cssin("ol3-popup","\n.ol-popup {\n}\n\n.ol-popup.hidden {\n    display: none;\n}\n\n.ol-popup.docked {\n    position:absolute;\n    bottom:0;\n    top:0;\n    left:0;\n    right:0;\n    width:auto;\n    height:auto;\n    pointer-events: all;\n}\n\n.ol-popup.docked:after {\n    display:none;\n}\n\n.ol-popup.docked .pages {\n    max-height: inherit;\n    overflow: auto;\n    height: calc(100% - 60px);\n}\n\n.ol-popup.docked .pagination {\n    position: absolute;\n    bottom: 0;\n}\n\n.ol-popup .pagination .btn-prev::after {\n    content: \"⇦\"; \n}\n\n.ol-popup .pagination .btn-next::after {\n    content: \"⇨\"; \n}\n\n.ol-popup .pagination.hidden {\n    display: none;\n}\n\n.ol-popup .ol-popup-closer {\n    border: none;\n    background: transparent;\n    color: inherit;\n    position: absolute;\n    top: 0;\n    right: 0;\n    text-decoration: none;\n}\n    \n.ol-popup .ol-popup-closer:after {\n    content:'✖';\n}\n\n.ol-popup .ol-popup-docker {\n    border: none;\n    background: transparent;\n    color: inherit;\n    text-decoration: none;\n    position: absolute;\n    top: 0;\n    right: 20px;\n}\n\n.ol-popup .ol-popup-docker:after {\n    content:'□';\n}\n"),e.css&&this.injectCss("options",e.css);var t=this.domNode=document.createElement("div");t.className="popup-element",this.setElement(t),this.handlers.push(function(){return t.remove()})},n.prototype.configureContentContainer=function(){var e=this.content=document.createElement("div");e.className=h,this.domNode.appendChild(e)},n.prototype.configureDockContainer=function(e){var t=this;if(this.options.dockContainer&&this.options.dockContainer){var n=this.docker=document.createElement("label");n.className=g,e.appendChild(n),n.addEventListener("click",function(e){t.isDocked()?t.undock():t.dock(),e.preventDefault()},!1)}},n.prototype.createCloser=function(e){var t=this,n=this.closer=document.createElement("label");n.className=m,e.appendChild(n),n.addEventListener("click",function(e){t.hide(),e.preventDefault()},!1)},n.prototype.configurePaging=function(){var e=this,t=this.pages=new i.Paging({popup:this}),n=new s.default({pages:t});n.hide(),n.on("prev",function(){return t.prev()}),n.on("next",function(){return t.next()}),t.on("goto",function(){return e.panIntoView()})},n.prototype.configureAutoPopup=function(){var e=this;if(this.options.autoPopup){var t=l.SelectInteraction.create({popup:this});this.on("change:active",function(){t.set("active",e.get("active"))}),this.handlers.push(function(){return t.destroy()})}},n.prototype.injectCss=function(e,t){e=this.getId()+"_"+e;var n=document.getElementById(e);n&&n.remove(),n=p.html("<style type='text/css' id='"+e+"'>"+t+"</style>"),o(document.head).append(n),this.handlers.push(function(){return n.remove()})},n.prototype.setPointerPosition=function(e){if(void 0===e&&(e=this.options.pointerPosition||0),this.getPosition()||!this.indicator){var t=this.getPositioning().split("-",2),n=t[0],o=t[1],i=this.indicator;switch(i||(i=this.indicator=new a.Overlay({autoPan:this.options.autoPan,autoPanMargin:this.options.autoPanMargin,autoPanAnimation:this.options.autoPanAnimation,element:p.html('<span class="simple-popup-down-arrow"></span>')}),this.options.map.addOverlay(i)),i.setPositioning(this.getPositioning()),i.setPosition(this.getPosition()),n){case"top":switch(i.setElement(p.html('<span class="simple-popup-up-arrow"></span>')),i.setOffset([0,0+e]),i.setPositioning("top-center"),o){case"center":this.setOffset([0,8+e]);break;case"left":this.setOffset([-7,8+e]);break;case"right":this.setOffset([7,8+e])}break;case"bottom":i.setElement(p.html('<span class="simple-popup-down-arrow"></span>')),i.setOffset([0,0-e]),i.setPositioning("bottom-center");var r=-10-e;switch(o){case"center":this.setOffset([0,r]);break;case"left":this.setOffset([-7,r]);break;case"right":this.setOffset([7,r])}break;case"center":switch(o){case"center":i.setPosition(null);break;case"left":i.setElement(p.html('<span class="simple-popup-left-arrow"></span>')),i.setOffset([e,0]),i.setPositioning("center-left"),this.setOffset([5+e,0]);break;case"right":i.setElement(p.html('<span class="simple-popup-right-arrow"></span>')),i.setOffset([-e,0]),i.setPositioning("center-right"),this.setOffset([-5-e,0])}break;default:throw"unknown value: "+n}switch(o){case"center":case"left":case"right":break;default:throw"unknown value: "+n}}else this.indicator.setPosition(void 0)},n.prototype.setPosition=function(e){if(this.options.position=e,this.isDocked()){var t={center:e},n=this.options.map.getView();this.options.autoPanAnimation&&u.mixin(t,this.options.autoPanAnimation.duration),n.animate(t)}else o=this.getPosition(),i=e,o&&i&&(o===i||o.length===i.length&&o.every(function(e,t){return e==i[t]}))||r.prototype.setPosition.call(this,e);var o,i;this.setPointerPosition(this.options.pointerPosition)},n.prototype.panIntoView=function(){this.isOpened()&&(this.isDocked()||r.prototype.panIntoView.call(this))},n.prototype.destroy=function(){this.handlers.forEach(function(e){return e()}),this.handlers=[],this.getMap()&&this.getMap().removeOverlay(this),this.dispatchEvent(b)},n.prototype.show=function(e,t){return t instanceof HTMLElement?(this.content.innerHTML="",this.content.appendChild(t)):this.content.innerHTML=t,this.options.autoPositioning&&this.setPositioning(c.smartpick(this,e)),this.setPosition(e),this.domNode.classList.remove(v),this.dispatchEvent(k),this},n.prototype.on=function(e,t){return r.prototype.on.call(this,e,t)},n.prototype.hide=function(){return this.setPosition(void 0),this.indicator&&this.indicator.setPosition(void 0),this.pages.clear(),this.domNode.classList.add(v),this.dispatchEvent(w),this},n.prototype.isOpened=function(){return!this.domNode.classList.contains(v)},n.prototype.isDocked=function(){return this.domNode.classList.contains(y)},n.prototype.dock=function(){var e=this.getMap();return this.options.map=e,this.options.parentNode=this.domNode.parentElement,e.removeOverlay(this),this.domNode.classList.add(y),this.options.dockContainer.appendChild(this.domNode),this.dispatchEvent(x),this},n.prototype.undock=function(){return this.options.parentNode.appendChild(this.domNode),this.domNode.classList.remove(y),this.options.map.addOverlay(this),this.setPosition(this.options.position),this.dispatchEvent(P),this},n.prototype.applyOffset=function(e){var t=e[0],n=e[1];switch(this.getPositioning()){case"bottom-left":this.setOffset([t,-n]);break;case"bottom-right":this.setOffset([-t,-n]);break;case"top-left":this.setOffset([t,n]);break;case"top-right":this.setOffset([-t,n])}},n}(a.Overlay);t.Popup=r}),define("examples/extras/feature-creator",["require","exports","openlayers","node_modules/ol3-symbolizer/index"],function(e,t,s,n){"use strict";var o=new n.Symbolizer.StyleConverter;function p(e,t){return void 0===t&&(t=1e3),[e[0]+t*Math.random(),e[1]+t*Math.random()]}function l(e,t){return[e[0]+t[0],e[1]+t[1]]}function c(e,t){var n=o.fromJson(t);return e.setStyle(n),n}return function(){function t(e){var t=(this.options=e).map,i=new s.source.Vector({features:[]}),n=new s.layer.Vector({source:i,style:new s.style.Style({fill:new s.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.style.Stroke({color:"#ffcc33",width:2}),image:new s.style.Circle({radius:7,fill:new s.style.Fill({color:"#ffcc33"})})})});t.addLayer(n),t.on("click",function(e){if(s.events.condition.altKeyOnly(e)){var t=(e=e.mapBrowserEvent||e).coordinate,n=new s.geom.Point(t),o=new s.Feature({geometry:n,name:"New Feature",attributes:{}});i.addFeature(o)}})}return t.create=function(e){return new t(e)},t.prototype.addSomeFeatures=function(e,t){var n=new s.Feature({id:123,foo:"foo",bar:"bar"});n.setGeometry(new s.geom.Point(p(t,100))),c(n,{circle:{fill:{color:"rgba(255,0,0,0.90)"},opacity:1,stroke:{color:"rgba(0,0,0,1)",width:1},radius:6}});var o=new s.Feature({id:123,foo:"foo",bar:"bar"});o.setGeometry(new s.geom.Point(p(l(t,[1e3,0])))),c(o,{image:{imgSize:[36,36],anchor:[32,32],stroke:{color:"rgba(128,25,0,0.8)",width:10},path:"M23 2 L23 23 L43 16.5 L23 23 L35 40 L23 23 L11 40 L23 23 L3 17 L23 23 L23 2 Z"}});var i=new s.Feature({id:123,foo:"foo",bar:"bar"}),r=p(l(t,[1e3,1e3]));i.setGeometry(new s.geom.Polygon([[r,p(t,1e3),p(t,1e3),r]])),c(i,{fill:{color:"rgba(255,255,0, 0.8)"},stroke:{color:"rgba(0,255,0,1)",width:1}});var a=new s.Feature({id:123,foo:"foo",UserIdentification:"foo.bar@foobar.org"});return a.setGeometry(new s.geom.Point(p(l(t,[0,1e3])))),c(a,{circle:{fill:{color:"rgba(100,100,100,0.5)"},opacity:1,stroke:{color:"rgba(100,100,100,1)",width:8},radius:32}}),e.getSource().addFeatures([n,o,i,a]),this},t}()}),define("examples/activate",["require","exports","openlayers","ol3-popup/ol3-popup","node_modules/ol3-fun/ol3-fun/common","examples/extras/feature-creator"],function(e,t,i,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=i.proj.transform([-.92,52.96],"EPSG:4326","EPSG:3857");t.run=function(){a.cssin("activate","\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n.map .toggle-active {\n    position: absolute;\n    top: 1em;\n    left: 3em;\n    z-index: 1;\n}\n"),document.body.appendChild(a.html('<div>\n<div class="map">\n    <input type="button" class="toggle-active" value="Toggle Popup"></input>\n</div>\n</div>'));var e=document.getElementsByClassName("map")[0],t=new i.Map({target:e,layers:[new i.layer.Tile({source:new i.source.OSM})],view:new i.View({projection:"EPSG:3857",center:p,zoom:16})}),n=new i.layer.Vector({source:new i.source.Vector});t.addLayer(n),s.create({map:t}).addSomeFeatures(n,p);var o=r.Popup.create({map:t,css:"\n.ol-popup {\n    background-color: white;\n    padding: 4px;\n    padding-top: 24px;\n    border: 1px solid rgba(0, 0, 0, 1);\n}\n.pagination {\n    min-width: 160px;\n}\n.pagination .page-num {\n    min-width: 100px;\n    display: inline-block;\n    text-align: center; \n}\n.pagination .arrow.btn-next {\n    float: right;\n}",layers:[n]});o.set("active",!1),document.getElementsByClassName("toggle-active")[0].addEventListener("click",function(){return o.set("active",!o.get("active"))})}}),define("examples/docking",["require","exports","openlayers","jquery","ol3-popup/ol3-popup","node_modules/ol3-fun/ol3-fun/common"],function(e,t,i,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=i.proj.transform([-85,35],"EPSG:4326","EPSG:3857");t.run=function(){r(document.head).append(s.html("<style name=\"paging\" type='text/css'>\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n</style>")),r(document.body).append(s.html("<div>\n<div class=\"map\"></div>\n<div class='dock-container'></div>\n</div>"));var e=document.getElementsByClassName("map")[0],t=document.getElementsByClassName("dock-container")[0],n=new i.Map({target:e,layers:[new i.layer.Image({source:new i.source.ImageArcGISRest({projection:"EPSG:3857",ratio:1,params:{},url:"https://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/ESRI_StateCityHighway_USA/MapServer"})})],view:new i.View({center:p,zoom:6})}),o=a.Popup.create({map:n,autoPan:!0,autoPanMargin:20,autoPanAnimation:{source:null,duration:500},autoPopup:!0,showCoordinates:!0,css:"\n\n.dock-container {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 200px;\n    height: 300px;\n    border: 1px solid rgba(0,0,0,0.1);\n    display: inline-block;\n    padding: 20px;\n    background: transparent;\n    pointer-events: none;\n}\n\n.ol-popup {\n    width: 300px;\n    min-height: 50px;\n    background: white;\n    color: black;\n    border: 4px solid black;\n    border-radius: 12px;\n}\n\n.ol-popup:after {\n    border-top-color: black;\n}\n\n.ol-popup .ol-popup-content {\n    padding: 0;\n}\n\n.ol-popup .ol-popup-content > *:first-child {\n    margin-right: 36px;\n    overflow: hidden;\n    display: block;\n}\n\n.ol-popup .pagination button {\n    border:none;\n    background:transparent;\n}\n\n.ol-popup .ol-popup-closer {\n    width: 24px;\n    height: 24px;    \n    text-align: center;\n    border-top-right-radius: 8px;\n}\n\n.ol-popup .ol-popup-docker {\n    width: 24px;\n    height: 24px;\n    text-align: center;\n}\n\n.ol-popup .ol-popup-closer:hover {\n    background-color: red;\n    color: white;\n}\n\n.ol-popup .ol-popup-docker:hover {\n    background-color: #999;\n    color: white;\n}\n\n.ol-popup .ol-popup-content > *:first-child {\n    margin-right: 40px;\n}\n\n.ol-popup .arrow.active:hover {\n    background-color: #999;\n    color: white;    \n}\n\n",dockContainer:t,pointerPosition:150,multi:!0});o.on("dock",s.debounce(function(){var e=o.on("show",function(){var e=a.Popup.create({map:n,autoPopup:!1,positioning:"top-center",asContent:function(e){return s.html("<b>Hi "+e.get("hello")+"</b>")}});o.once(["undock","dispose"],function(){return e.destroy()});var t=new i.Feature({hello:"Hello",geometry:new i.geom.Point(o.options.position)});e.pages.addFeature(t,{searchCoordinate:o.options.position}),e.pages.goto(0)});o.once(["undock","dispose"],function(){return i.Observable.unByKey(e)})}))}}),define("examples/flash-style",["require","exports"],function(e,t){"use strict";return[{circle:{fill:{gradient:{type:"radial(25,25,21,25,25,0)",stops:"rgba(185,7,126,0.66) 0%;rgba(171,23,222,0.29) 100%"}},opacity:1,stroke:{color:"rgba(5,105,56,0.97)",width:4},radius:21,rotation:0}}]}),define("examples/multi",["require","exports","openlayers","ol3-popup/ol3-popup","node_modules/ol3-symbolizer/index","node_modules/ol3-fun/ol3-fun/common","examples/extras/feature-creator"],function(e,t,i,r,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=new n.Symbolizer.StyleConverter,l=i.proj.transform([-.92,52.96],"EPSG:4326","EPSG:3857");t.run=function(){a.cssin("multi","\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n"),document.body.appendChild(a.html('<div>\n<div class="map">\n<label>Hold the shift key down when clicking the marker to multi-select</label>\n</div>\n</div>'));var e=document.getElementsByClassName("map")[0],t=new i.Map({target:e,layers:[new i.layer.Tile({source:new i.source.OSM})],view:new i.View({center:l,zoom:16})}),n=r.Popup.create({map:t,multi:!0,css:"\n.ol-popup {\n    background-color: white;\n    padding: 4px;\n    padding-top: 24px;\n    border: 1px solid rgba(0, 0, 0, 1);\n}\n.pagination {\n    min-width: 160px;\n}\n.pagination .page-num {\n    min-width: 100px;\n    display: inline-block;\n    text-align: center; \n}\n.pagination .arrow.btn-next {\n    float: right;\n}\ndiv.map > label {\n    position: absolute;\n    top: 10px;\n    left: 60px;\n    z-index: 1;\n}\n",pagingStyle:function(e,t,n){return[p.fromJson({circle:{fill:{color:"rgba(255,0,0,1)"},opacity:1,stroke:{color:"rgba(255,255,255,1)",width:5},radius:25},text:{text:""+(n+1),fill:{color:"white"},stroke:{color:"black",width:2},scale:3,"offset-y":0}})]},asContent:function(n){var e=document.createElement("div"),t=Object.keys(n.getProperties()).filter(function(e){var t=n.get(e);return"string"==typeof t||"number"==typeof t});return e.title=n.getGeometryName(),e.innerHTML="<table>"+t.map(function(e){return"<tr><td><b>"+e+"</b></td><td><i>"+n.get(e)+"</i></td></tr>"}).join("")+"</table>",e}});n.on("change:active",function(){return console.log("change:active")}),n.on("hide",function(){return console.log("hide")}),n.on("show",function(){return console.log("show",n.content.outerHTML)}),n.on("dispose",function(){return console.log("dispose")});var o=new i.layer.Vector({source:new i.source.Vector});t.addLayer(o),s.create({map:t}).addSomeFeatures(o,l)}}),define("examples/overlay",["require","exports","openlayers","node_modules/ol3-fun/ol3-fun/common"],function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.proj.transform([-85,35],"EPSG:4326","EPSG:3857");t.run=function(){a.cssin("simple",'\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n.ol-control.simple-infobox {\n    top: 1em;\n    left: 25%;\n    max-width: 50%;\n  }\n\n.simple-popup {\n    border: 1px solid black;\n    border-radius: 4px;\n    padding: 10px;\n    background-color: rgba(80, 80, 80, 0.5);\n    color: rgb(250, 250, 250);\n    max-width: 120px;\n}\n\n.simple-popup-arrow {\n    color: black;\n    font-size: 36px;\n}\n\n.simple-popup-down-arrow:after {\n    content: "⇩";\n    position: relative;\n    top: -8px;\n}\n\n.simple-popup-up-arrow:after {\n    content: "⇧";\n    position: relative;\n    top: 10px;\n}\n\n.simple-popup-left-arrow:after {\n    content: "⇦";\n}\n\n.simple-popup-right-arrow:after {\n    content: "⇨";\n}\n\n'),document.body.appendChild(a.html('<div>\n<div class="map"></div>\n</div>'));var e=new r.layer.Vector({source:new r.source.Vector}),t=new r.Map({target:document.getElementsByClassName("map")[0],layers:[e],view:new r.View({projection:"EPSG:3857",center:s,zoom:16})});t.addControl(new r.control.Control({element:a.html('<div class="simple-infobox ol-unselectable ol-control"><label>the purpose of this example is to show the techniques and complexities of creating a popup control</label></div>')}));var n=new r.Overlay({autoPan:!0,position:s,positioning:"center-center",element:a.html('<div class="ol-unselectable" border="1px solid red">❌</div>')});t.addOverlay(n);var o=new r.Overlay({autoPan:!0,position:s,positioning:"bottom-center",element:a.html('<div class="ol-unselectable" style="text-align: center"><div class="simple-popup">Overlay with positioning set to bottom-center</div><span class="simple-popup-arrow simple-popup-down-arrow"></span></div>')});t.addOverlay(o);var i=new r.Overlay({autoPan:!0,position:s,positioning:"top-center",element:a.html('<div class="ol-unselectable" style="text-align: center"><span class="simple-popup-arrow simple-popup-up-arrow"></span><div class="simple-popup">Overlay with positioning set to top-center</div>')});t.addOverlay(i)}}),define("examples/paging",["require","exports","openlayers","ol3-popup/ol3-popup","examples/extras/feature-creator","node_modules/ol3-fun/ol3-fun/common","jquery"],function(e,t,i,o,a,s,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=["The story of the three little pigs...","This little piggy went to market","This little piggy stayed home","This little piggy had roast beef","This little piggy had none","And this little piggy, <br/>this wee little piggy, <br/>when wee, wee, wee, wee <br/>all the way home!"],c=i.proj.transform([-.92,52.96],"EPSG:4326","EPSG:3857");t.run=function(){document.head.appendChild(s.html("<style name=\"paging\" type='text/css'>\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n</style>")),document.body.appendChild(s.html("<div>\n<div class=\"map\"></div>\n<div class='dock-container'></div>\n</div>"));var e=document.getElementsByClassName("map")[0],t=document.getElementsByClassName("dock-container")[0],n=new i.Map({target:e,layers:[new i.layer.Tile({source:new i.source.OSM})],view:new i.View({center:c,zoom:6})}),r=o.Popup.create({map:n,autoPan:!0,autoPanMargin:20,autoPanAnimation:{source:null,duration:500},autoPopup:!0,showCoordinates:!0,css:"\n\n.dock-container {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 200px;\n    height: 300px;\n    border: 1px solid rgba(0,0,0,0.1);\n    display: inline-block;\n    padding: 20px;\n    background: transparent;\n    pointer-events: none;\n}\n\n.ol-popup {\n    width: 300px;\n    min-height: 50px;\n    background: white;\n    color: black;\n    border: 4px solid black;\n    border-radius: 12px;\n}\n\n.ol-popup:after {\n    border-top-color: black;\n}\n\n.ol-popup .ol-popup-content {\n    padding: 0;\n}\n\n.ol-popup .ol-popup-content > *:first-child {\n    margin-right: 36px;\n    overflow: hidden;\n    display: block;\n}\n\n.ol-popup .pagination button {\n    border:none;\n    background:transparent;\n}\n\n.ol-popup .ol-popup-closer {\n    width: 24px;\n    height: 24px;    \n    text-align: center;\n    border-top-right-radius: 8px;\n}\n\n.ol-popup .ol-popup-docker {\n    width: 24px;\n    height: 24px;\n    text-align: center;\n}\n\n.ol-popup .ol-popup-closer:hover {\n    background-color: red;\n    color: white;\n}\n\n.ol-popup .ol-popup-docker:hover {\n    background-color: #999;\n    color: white;\n}\n\n.ol-popup .ol-popup-content > *:first-child {\n    margin-right: 40px;\n}\n\n.ol-popup .arrow.active:hover {\n    background-color: #999;\n    color: white;    \n}\n\n",dockContainer:t,pointerPosition:150});r.on("show",function(){return console.log("show popup")}),r.on("hide",function(){return console.log("hide popup")}),r.pages.on("goto",function(){return console.log("goto page: "+r.pages.activeIndex)}),[1,2,3].map(function(e){return r.pages.add("Page "+e,new i.geom.Point(c))}),r.pages.goto(0),setTimeout(function(){r.show(c,"<div>Click the map to see a popup</div>");var n=0;console.log("adding 5 pages");var o=setInterval(function(){if(5==++n){console.log("detaching from map (docking)"),clearInterval(o),r.dock();var e=r.on("hide",function(){i.Observable.unByKey(e),r.undock()});setTimeout(function(){console.log("re-attaching to map (un-docking)"),r.undock(),console.log("adding a page with string and dom promise");var e=p.Deferred();r.pages.add(e),setTimeout(function(){return e.resolve("<p>This promise resolves to a string<p>")},500);var t=p.Deferred();r.pages.add(t);var n=document.createElement("div");n.innerHTML="<p>This function promise resolves to a div element</p>",setTimeout(function(){return t.resolve(n)},100),console.log("adding a page with a string callback"),r.pages.add(function(){return"<p>This function returns a string</p>"}),console.log("adding a page with a dom callback"),r.pages.add(function(){var e=document.createElement("div");return e.innerHTML="<p>This function returns a div element</p>",e}),console.log("adding a page with a string-promise"),r.pages.add(function(){var e=p.Deferred();return e.resolve("<p>This function promise resolves to a string</p>"),e}),console.log("adding a page with a dom-promise");var i="\nThis function promise resolves to a div element.\n<br/>\nThis page was resolved after 3 seconds.  \n<br/>As the content of this page grows, \n<br/>you should notice that the PanIntoView is continually keeping the popup within view.\n<br/>";r.pages.add(function(){var n=0,e=p.Deferred(),o=document.createElement("div"),t=document.createElement("div");return t.appendChild(o),setTimeout(function(){return e.resolve(t)},3e3),e.then(function(e){var t=setInterval(function(){o.innerHTML="<p>"+i.substr(0,++n)+"</p>",r.panIntoView(),i.length<=n&&clearInterval(t)},100)}),e})},1e3)}var t=document.createElement("div");t.innerHTML="PAGE "+n+"<br/>"+l[n%l.length],r.pages.add(t)},200)},500),a.create({map:n})}}),define("examples/style-offset",["require","exports","openlayers","ol3-popup/ol3-popup","node_modules/ol3-symbolizer/index","node_modules/ol3-fun/ol3-fun/common","examples/extras/feature-creator"],function(e,t,r,a,n,s,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new n.Symbolizer.StyleConverter;var l=r.proj.transform([-.92,52.96],"EPSG:4326","EPSG:3857");t.run=function(){document.head.appendChild(s.html("<style name=\"style-offset\" type='text/css'>\nhead, body {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.map {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\n</style>")),document.body.appendChild(s.html('<div>\n<div class="map"></div>\n</div>'));var e=document.getElementsByClassName("map")[0],t=new r.Map({target:e,layers:[new r.layer.Tile({source:new r.source.OSM})],view:new r.View({center:l,zoom:16})}),o=a.Popup.create({map:t,autoPan:!0,autoPanMargin:20,autoPanAnimation:{source:null,duration:500},pointerPosition:20,positioning:"top-left",offset:[0,-10],css:"\n        .ol-popup {\n            background-color: white;\n            border: 1px solid black;\n            padding: 4px;\n            width: 200px;\n        }\n        "}),n=new r.source.Vector({features:[]}),i=new r.layer.Vector({source:n,style:function(e,t){return e.getStyle()}});t.addLayer(i),p.create({map:t}).addSomeFeatures(i,l),o.on("show",function(){o.applyOffset(o.options.offset||[0,0]),o.setPointerPosition(o.options.pointerPosition)}),o.pages.on("goto",function(){var e=o.pages.activePage.location.get("popup-info");if(e){if(e.positioning){var t=o.getPositioning();if(t!==e.positioning){o.setPositioning(e.positioning);var n=o.on("hide",function(){r.Observable.unByKey(n),o.setPositioning(t)})}}e.offset&&o.applyOffset(e.offset),o.setPointerPosition(e.pointerPosition||o.options.pointerPosition)}else o.setOffset(o.options.offset||[0,0])})}}),define("examples/simple",["require","exports","openlayers","node_modules/ol3-fun/ol3-fun/common","ol3-popup/ol3-popup","examples/extras/feature-creator"],function(e,t,n,p,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n.proj.transform([-85,35],"EPSG:4326","EPSG:3857");t.run=function(){console.log("the purpose of this example is to show the techniques and complexities of creating a popup control"),p.cssin("simple",'\nhead, body, .map {\n    padding: 0;\n    margin: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n}\n\nbody { \n    margin-top: 0;\n    margin-left: 1px;\n}\n\nbody * {\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n.simple-popup {\n    border: 1px solid black;\n    border-radius: 4px;\n    padding: 10px;\n    background-color: rgba(80, 80, 80, 0.5);\n    color: rgb(250, 250, 250);\n    max-width: 120px;\n}\n\n.simple-popup-down-arrow {\n    color: black;\n    font-size: 20px;\n}\n\n.simple-popup-down-arrow:after {\n    content: "⇩";\n}\n\n.simple-popup-up-arrow {\n    color: black;\n    font-size: 20px;\n}\n\n.simple-popup-up-arrow:after {\n    content: "⇧";\n}\n\n.simple-popup-left-arrow {\n    color: black;\n    font-size: 20px;\n}\n\n.simple-popup-left-arrow:after {\n    content: "⇦";\n}\n\n.simple-popup-right-arrow {\n    color: black;\n    font-size: 20px;\n}\n\n.simple-popup-right-arrow:after {\n    content: "⇨";\n}\n\n'),document.body.appendChild(p.html('<div>\n<div class="map"></div>\n</div>'));var e=new n.layer.Vector({source:new n.source.Vector}),a=new n.Map({target:document.getElementsByClassName("map")[0],layers:[e],view:new n.View({projection:"EPSG:3857",center:r,zoom:16})});i.create({map:a}).addSomeFeatures(e,r),a.addOverlay(new n.Overlay({position:r,positioning:"center-center",element:p.html('<div border="1px solid red">❌</div>')}));var s=o.Popup.create({map:a,pointerPosition:5,autoPan:!0,autoPanMargin:20,positioning:"bottom-center",autoPanAnimation:{source:null,duration:100}});setTimeout(function(){new Promise(function(t,e){s.options.autoPositioning=!1;var n=s.getPositioning(),o=p.pair("top,center,bottom".split(","),"left,center,right".split(",")),i=setInterval(function(){var e;o.length?e=o.pop().join("-"):(clearInterval(i),s.options.autoPositioning=!0,e=n,t()),s.setPositioning(e),s.show(r,e)},200)}).then(function(){a.getView().setZoom(a.getView().getZoom()+1);var e=a.getSize(),t=e.map(function(t){return p.range(5).map(function(e){return t*e/4})}),n=t[0],o=t[1],i=p.pair(n,o).map(function(e){return a.getCoordinateFromPixel(e)}),r=setInterval(function(){if(i.length){var e=i.pop();s.show(e,e.map(function(e){return Math.floor(e)})+"<br/>"+i.length+" remaining")}else clearInterval(r)},1e3)})},500)}}),define("examples/index",["require","exports","examples/activate","examples/docking","examples/flash-style","examples/multi","examples/overlay","examples/paging","examples/style-offset","examples/simple"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.run=function(){var e=window.location,t=""+e.origin+e.pathname+"?run=examples/";document.writeln("\n    <p>\n    Watch the console output for failed assertions (blank is good).\n    </p>\n    "),document.writeln("\n    overlay\n    simple\n    index\n    ".split(/ /).map(function(e){return e.trim()}).filter(function(e){return!!e}).sort().map(function(e){return'<a href="'+t+e+'&debug=1">'+e+"</a>"}).join("<br/>"))}});
//# sourceMappingURL=examples.js.map